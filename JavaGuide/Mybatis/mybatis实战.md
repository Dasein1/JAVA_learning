https://www.bilibili.com/video/BV1MT4y1k7wZ/?p=14&vd_source=7116afddac4acaa2875e31b432e7f0ed

# 什么是MyBatis？
![](images/2022-11-24-09-30-16.png)
## JDBC缺点->MyBatis
![](images/2022-11-24-09-31-23.png)
![](images/2022-11-24-09-33-35.png)

# 快速入门
## 案例需求
![](images/2022-11-24-09-35-06.png)
1.定义pojo类来映射返回数据
2.编写核心配置文件：设置datasource


## 解决SQL语句警告提示
![](images/2022-11-24-10-46-04.png)

# Mapper代理开发
![](images/2022-11-24-10-52-49.png)
![](images/2022-11-24-10-54-20.png)
## 关于Resource资源
resource资源下的文件在编译后会放到java包对应的目录下

# MyBatis核心配置文件
![](images/2022-11-24-18-32-01.png)

# 配置文件完成增删改查
![](images/2022-11-24-18-35-18.png)
## 环境配置
![](images/2022-11-24-18-35-39.png)

### MyBatisX插件
![](images/2022-11-24-18-50-22.png)

## 查询所有结果
![](images/2022-11-24-18-57-55.png)
![](images/2022-11-24-20-30-30.png)

## 查看详情
![](images/2022-11-24-20-33-23.png)
### 参数占位符  #{}  ${}
1.#{}  
会将其替换为？，为了防止SQL注入
![](images/2022-11-24-20-48-02.png)
2.${}
拼SQL，会存在SQL注入问题  
![](images/2022-11-24-20-48-42.png)

3.使用时机：
参数传递的时候#{}
表名或列名不固定的情况下：${}


![](images/2022-11-25-10-28-32.png)

不开启useServerPrepStmts
都会用statement
![](images/2022-11-25-13-38-16.png)
开启useServerPrepStmts
用preparedstatement
对${}占位符，拼好了，预编译然后执行
![](images/2022-11-25-13-48-06.png)

对#{}占位符用?替代后，预编译然后执行
![](images/2022-11-25-13-51-15.png)



![](images/2022-11-25-13-42-27.png)
![](images/2022-11-25-13-44-44.png)




## 条件查询
### 多条件查询
![](images/2022-11-25-11-09-50.png)
![](images/2022-11-25-11-13-24.png)
#### 参数传递的方式
1.MyBatis不知道把哪个参数值传给哪个占位符，所以如果是多个参数的话，需要用@Param注解标注
2.用一个对象去存储所有参数，属性名需要和占位符名保持一致，MyBatis根据占位符名去找到对应的值
3.也可以用一个Map去存储所有参数，原理和2一样

![](images/2022-11-25-11-39-24.png)


### 动态条件查询
多条件查询时有的条件用户没有输入怎么查询呢？
![](images/2022-11-25-11-41-29.png)
![](images/2022-11-25-12-12-49.png)
![](images/2022-11-25-12-13-26.png)
![](images/2022-11-25-12-13-49.png)

### 单条件动态查询
![](images/2022-11-25-12-11-47.png)


## 添加&修改功能
![](images/2022-11-25-14-26-18.png)
![](images/2022-11-25-14-29-09.png)
默认开启事务,如果不关闭，则在执行添加操作之后直接关闭statement则会回滚
### 问题：添加记录回滚
解决：
1.手动提交事务
2.设置openSession(true)开启自动提交事务

### 问题：插入数据后无法拿到主键
解决：
![](images/2022-11-25-14-42-49.png)
![](images/2022-11-25-14-42-17.png)
[useGeneratedKeys、keyProperty、KeyColumn的使用](https://blog.csdn.net/munangs/article/details/123297002)
### 修改
#### 修改全部字段
![](images/2022-11-25-14-44-13.png)

#### 修改动态字段
![](images/2022-11-25-14-47-54.png)
![](images/2022-11-25-14-51-30.png)
![](images/2022-11-25-14-53-15.png)
![](images/2022-11-25-14-54-47.png)
默认数组参数对应名字为array,否则需用@Param设置
![](images/2022-11-25-14-56-21.png)


## 参数传递
![](images/2022-11-25-14-59-49.png)






# 场景问题
## 1.如何自定义数据库中数据类型和java中数据类型的转换方式？
## 默认类型处理器
![](images/2022-11-26-15-36-16.png)

## 需求java的Date与数据库varchar毫秒值之间的转换
![](images/2022-11-26-15-37-51.png)



## 2.分页查询
![](images/2022-11-27-10-57-53.png)
### 2.1导入坐标
![](images/2022-11-27-11-08-07.png)
### 2.2 MyBatis核心配置文件中配置PageHelper插件
![](images/2022-11-27-11-18-48.png)
### 2.3 代码测试
![](images/2022-11-27-11-15-20.png)